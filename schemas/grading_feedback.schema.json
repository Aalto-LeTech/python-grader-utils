{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/Aalto-LeTech/python-grader-utils/master/schemas/grading_feedback.schema.json",
    "title": "Grading feedback",
    "description": "Grading feedback for a completed grader test for a single exercise. Contains all information required to display grader test results.",
    "type": "object",
    "oneOf": [
        {
            "anyOf": [
                {
                    "required": [
                        "resultGroups"
                    ]
                },
                {
                    "required": [
                        "warningMessages"
                    ]
                }
            ]
        }
    ],
    "properties": {
        "points": {
            "description": "Amount of points awarded in total from all test groups",
            "type": "integer",
            "minimum": 0
        },
        "maxPoints": {
            "description": "Maximum amount of possible points in total from all test groups",
            "type": "integer",
            "minimum": 0
        },
        "testsRun": {
            "description": "Amount of tests run in total",
            "type": "integer",
            "minimum": 0
        },
        "resultGroups":  {
            "description": "Test result groups",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "$ref": "https://raw.githubusercontent.com/Aalto-LeTech/python-grader-utils/master/schemas/test_result_group.schema.json"
            }
        },
        "resultId": {
            "description": "Unique identifier of the result that should be embedded into the output",
            "type": "string"
        },
        "warningMessages": {
            "description": "Warning messages about improperly configured tests and/or fatal errors that prevented the tests from completing correctly. These warnings should only be used if the testing pipeline itself throws unhandled exceptions, not when the modules being tested by the test pipeline throw errors.",
            "type": "array",
            "minItems": 1,
            "items": {
                "type": "string"
            }
        },
        "theme": {
            "description": "Test output theme",
            "enum": [
                "default"
            ]
        }
    }
}
